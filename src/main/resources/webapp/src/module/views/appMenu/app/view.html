<div class="layui-form" lay-filter="root-form-list">
    <!--ID(隐藏)-->
    <div class="layui-form-item">
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="hidden" name="id" value="{{ d.params.id || '' }}"  placeholder="ID" autocomplete="off" class="layui-input">
            </script>
        </div>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="hidden" name="parentid" value="{{ d.params.parentid || '1' }}"   autocomplete="off" class="layui-input">
            </script>
        </div>
    </div>

    <!--序号和应用名称-->
    <div class="layui-form-item">
        <label class="layui-form-label"><span style="color: red; ">*</span>应用标识：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="appId" value="{{ d.params.appId || '' }}" lay-verify="required" placeholder="请输入应用标识" autocomplete="off" class="layui-input">
            </script>
        </div>
        <label class="layui-form-label"><span style="color: red; ">*</span>应用名称：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="name" value="{{ d.params.name || '' }}" lay-verify="required" placeholder="请输入应用名称" autocomplete="off" class="layui-input">
            </script>
        </div>
    </div>

    <!--应用类型、应用分类-->
    <div class="layui-form-item">
        <label class="layui-form-label"><span style="color: red; ">*</span>应用类型：</label>
        <div class="layui-input-inline">
            <select name="type" id = "type" lay-verify="required">
            </select>
        </div>
        <label class="layui-form-label">应用分类：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="category" value="{{ d.params.category || '' }}"  placeholder="请输入应用分类" autocomplete="off" class="layui-input">
            </script>
        </div>
    </div>

    <!--APP Key和应用地址-->
    <div class="layui-form-item">
        <label class="layui-form-label">App Key：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="key1" value="{{ d.params.key1 || '' }}"  placeholder="请输入应用Key" autocomplete="off" class="layui-input">
            </script>
        </div>
        <label class="layui-form-label">应用地址：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="url" value="{{ d.params.url || '' }}"  placeholder="请输入应用地址" autocomplete="off" class="layui-input">
            </script>
        </div>
    </div>

    <!--回调地址和域名-->
    <div class="layui-form-item">
        <label class="layui-form-label">回调地址：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="callbackUrl" value="{{ d.params.callbackUrl || '' }}"  placeholder="请输入回调地址" autocomplete="off" class="layui-input">
            </script>
        </div>
        <label class="layui-form-label">域名：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="domain" value="{{ d.params.domain || '' }}"  placeholder="请输入域名" autocomplete="off" class="layui-input">
            </script>
        </div>
    </div>

    <!--IP和端口-->
    <div class="layui-form-item">
        <label class="layui-form-label">IP：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="ip" value="{{ d.params.ip || '' }}"  placeholder="请输入IP" autocomplete="off" class="layui-input">
            </script>
        </div>
        <label class="layui-form-label">端口：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="port" value="{{ d.params.port || '' }}" placeholder="请输入端口" autocomplete="off" class="layui-input">
            </script>
        </div>
    </div>

    <!--描述-->
    <div class="layui-form-item layui-form-text">
        <label class="layui-form-label">描述：</label>
        <div class="layui-input-block" style="width:500px">
            <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
        </div>
    </div>

    <!--应用图标和应用图片-->
    <div class="layui-form-item">
        <label class="layui-form-label">应用图标：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="hidden" id="icon" name="icon" value="{{ d.params.icon || '' }}" class="layui-input">
                  </script>
            <input type="text" name="iconPicker" id="iconPicker" lay-filter="iconPicker" class="layui-input">
        </div>
        <label class="layui-form-label">应用图片：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="image" id="image" value="{{ d.params.image || '' }}" disabled="true"  autocomplete="off" class="layui-input">
            </script>
        </div>
        <button id="uploadButton" class="layui-btn layui-btn-normal layui-btn-sm buttonStyle01" >照片上传</button>
    </div>

    <!--开发者信息和次序-->
    <div class="layui-form-item">
        <label class="layui-form-label" style="width:84px">开发者信息：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="text" name="developer" value="{{ d.params.developer || '' }}"  placeholder="请输入开发者信息" autocomplete="off" class="layui-input">
            </script>
        </div>
        <label class="layui-form-label"><span style="color: red; ">*</span>次序：</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <input type="number" name="sorting" value="{{ d.params.sorting || '' }}" lay-verify="required" placeholder="请输入次序" autocomplete="off" class="layui-input">
            </script>
        </div>
    </div>
    <!--按钮提交-->
    <div class="layui-form-item" style="text-align:center;padding:10px;">
        <input type="button" lay-submit lay-filter="form-submit-appInfo" value="保存" class="layui-btn" style="float:right;margin-right:100px">
    </div>
</div>
<script type="text/html" template lay-done="layui.data.sendParams(d.params)">
</script>



<script>
    layui.data.sendParams = function(params) {
        layui.use(['iconPicker', 'global'], function () {
            var $ = layui.$,
                iconpicker = layui.iconPicker,
                global = layui.global;



            //***方法定义***
            var active = {
                //1.照片上传
                fileUpload: function () {
                    var param = {};
                    param.elem = "#uploadButton";
                    param.input = "#image";
                    global.fileUpload(param);
                }
            }

            iconpicker.render({
                elem: '#iconPicker', // 选择器，推荐使用input
                type: 'fontClass', // 数据类型：fontClass/unicode，推荐使用fontClass
                search: true, // 是否开启搜索：true/false
                click: function (data) { // 点击回调
                    $('#icon').val(data.icon);
                }
            });

            setTimeout(function () {
                test();
            }, 100);

            function test() {
                var icon = $('#icon').val();
                iconpicker.checkIcon('iconPicker', icon);
            }

            
            //***初始化***
            global.pickDic_mul({type:'应用类型'}); //字典字段初始化
            global.set_dicField_mul({type: params.type}); //字典字段赋初值
            active.fileUpload();

        })
    }

</script>